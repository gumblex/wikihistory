<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head>
<title>说明</title>
<link href="style.css" rel="stylesheet"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>
<h1>维基编年史 / 维基日历</h1>

<h2>制作过程</h2>

<p>可参见<code>make.sh</code>自动生成。</p>

<ol>
<li>下载<a href="http://dumps.wikimedia.org/zhwiki/latest/">维基百科XML数据</a>：选择 zhwiki-latest-pages-articles.xml.bz2。注意你的硬盘。</li>
<li><code>bzcat zhwiki-latest-pages-articles.xml.bz2 | python3 WikiExtractoryear.py</code></li>
<li><code>python3 sorthistory.py -l &lt;语言&gt; -i &lt;XML文件名&gt;</code> -l 选项可以为：
<ul>
<li><strong>zh-cn</strong> 大陆简体</li>
<li><strong>zh-hk</strong> 香港繁體</li>
<li><strong>zh-sg</strong> 马新简体</li>
<li><strong>zh-tw</strong> 台灣正體</li>
</ul></li>
</ol>

<p>维基日历制作过程相同，脚本文件名为<code>WikiExtractordate.py</code>、<code>sortdate.py</code>。</p>

<h2>文件说明</h2>

<ul>
<li><strong>README.md</strong> 本说明。</li>
<li><strong>make.sh</strong> 自动制作脚本：使用前请按实际修改。</li>
<li><strong>WikiExtractoryear.py</strong>、<strong>WikiExtractordate.py</strong> 筛选原存档XML中所需部分。</li>
<li><strong>sorthistory.py</strong>、<strong>sortdate.py</strong> 整理筛选出的XML文件并生成HTML。</li>
<li><strong>wikihistory.opf</strong>、<strong>wikidate.opf</strong> EPub元数据。</li>
<li><strong>style.css</strong> HTML样式。
本次生成：</li>
<li><strong>wikihistory.xml</strong>、<strong>wikidate.xml</strong> 筛选出的XML文件</li>
<li><strong>wikihistory_*.html</strong> 《维基编年史》</li>
<li><strong>wikidate_*.html</strong> 《维基日历》</li>
<li><strong>wikihistory_*.book.html</strong> 《维基编年史》EPub版HTML</li>
<li><strong>wikidate_*.book.html</strong> 《维基日历》EPub版HTML</li>
</ul>
</body>
